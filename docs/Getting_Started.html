<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Stacy Irwin" />

<meta name="date" content="2020-01-01" />

<title>Getting Started with firstapiR</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started with firstapiR</h1>
<h4 class="author">Stacy Irwin</h4>
<h4 class="date">2020-01-01</h4>



<p>The firstapiR package provides R functions that download FIRST Robotics Competition (FRC) data from the FIRST API server via hypertext transfer protocol (HTTP) requests. The firstapiR package formats the resulting data as JSON text, XML text, or as R data frames.</p>
<div id="version-2.0.1" class="section level3">
<h3>Version 2.0.1</h3>
<p>This guide is for version 2.0.1 of the firstapiR package. <a href="http://irwinsnet.github.io/projects/firstapiR/Getting_Started_v100">Guidance for version 1.0.0 of firstapiR is located here</a>.</p>
</div>
<div id="first---for-inspiration-and-recognition-in-science-and-technology" class="section level3">
<h3>FIRST - <em>F</em>or <em>I</em>nspiration and <em>R</em>ecognition in <em>S</em>cience and <em>T</em>echnology</h3>
<p>FIRST engages kids in kindergarten through high school in exciting, mentor-based, research and robotics programs that help them become science and technology leaders, as well as well-rounded contributors to society. Learn more about FIRST by <a href="http://www.firstinspires.org/">visiting their website.</a></p>
<p>FRC is one of four FIRST programs. In FRC, high-school students, in cooperation with adult mentors, design and build robots and operate them in competitions. The competitions have detailed rules (<a href="http://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">check out the 2016 game manual</a>) and an extensive amount of data is generated at each competition. All scheduling, team, scoring, and ranking data is stored in FIRST servers and is made available to users via the FIRST API.</p>
</div>
<div id="getting-access-to-the-first-api" class="section level3">
<h3>Getting Access to the FIRST API</h3>
<p>To see what the FIRST API can do, visit the <a href="http://docs.frcevents2.apiary.io/#">FIRST API documentation page</a>. The documentation page provides detailed information on the formats for HTTP request and authorization headers, as well as detailed descriptions of the data provided by each type of API call.</p>
<p>To use the FIRST API (via firstapiR functions or via HTTP requests that you build yourself), you must have a username and authorization key issued by FIRST. To get a username and authorization key, go to the <a href="https://usfirst.collab.net/sf/projects/first_community_developers/">FIRST Community Developers page on TeamForge</a>. Follow the instructions on the page to join the project and FIRST will email you a username and authorization key. Make sure you keep your authorization key secret - don’t post the key anywhere that is publicly accessible.</p>
</div>
<div id="learning-r" class="section level3">
<h3>Learning R</h3>
<p>R is a functional language intended for statistical computing, data analysis and plotting. I initially considered building this package in Python, but in the end I wanted to learn to use R, so here we are. R seems a bit quirky at first, especially compared to other languages like Java or Python, but it has some useful, built-in features for working with data. R has an extensive array of free add-in packages for manipulating and visualizing data, plus there is an excellent and free IDE available for R, RStudio.</p>
<p>If you are new to R, experimenting with firstapiR isn’t the worst way to get started, but there are some resources you should check out:</p>
<ol style="list-style-type: decimal">
<li>Download R from <a href="https://cran.r-project.org/mirrors.html">the main R website</a>.</li>
<li>Download and use the free version of <a href="https://www.rstudio.com/home/">RStudio</a>.</li>
<li>To learn R, I recommend starting with the <a href="http://www.statmethods.net/">Quick R Website</a></li>
<li>Next, check out the R introduction on the <a href="https://cran.r-project.org/manuals.html">main R documentation page</a></li>
<li>Everything written by <a href="http://hadley.nz/">Hadley Wickham</a> is excellent. His <a href="http://adv-r.had.co.nz/">Advanced R website</a>, <a href="http://r-pkgs.had.co.nz/">R package website</a> and his <a href="https://cran.r-project.org/web/packages/testthat/index.html">testthat</a> and <a href="https://cran.r-project.org/web/packages/devtools/index.html">devtools</a> packages were essential to the development of the firstapiR package.</li>
</ol>
</div>
<div id="installing-the-firstapir-package" class="section level3">
<h3>Installing the firstapiR package</h3>
<ol style="list-style-type: decimal">
<li><p>Install the devtools package. This is easy to do in RStudio - just select <em>Tools-&gt;Install Packages…</em> from the menu bar, type “devtools” in the package name box and hit <em>Install</em>.</p></li>
<li><p>The devtools package provides a function for installing R packages from GitHub. Type the following command at the RStudio console prompt:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;irwinsnet/firstapiR&quot;</span>)</a></code></pre></div>
<p>If you need the prior version of firstapiR, use this command instead:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;irwinsnet/firstapiR&quot;</span>, <span class="dt">ref =</span> <span class="st">&quot;v1.0.0&quot;</span>)</a></code></pre></div>
<p>You can also download source or binary versions of the firstapiR package <a href="https://irwinsnet.github.io/">from this website</a>. Type <code>help(install.packages)</code> in the R or Rstudio console to see the documentation for installing packages.</p>
</div>
<div id="differences-between-versions-1.0.0-and-2.0.1" class="section level2">
<h2>Differences between Versions 1.0.0 and 2.0.1</h2>
<ol style="list-style-type: decimal">
<li><p>Version 1.0.0 of firstapiR is still available from github per the firstapiR installation instructions above.</p></li>
<li><p>The main difference from version 1.0.0 is that there are three shapes (i.e, types) of <em>Schedule</em>, <em>HybridSchedule</em>, and <em>MatchResult</em> data frames. The three shapes are <em>team</em>, <em>alliance</em>, and <em>match</em>. Team data frames have one row per team, requiring six rows to contain all of the data for a single match. The <em>station</em> column specifies the station to which the team was assigned. Alliance data frames have three teams per row, with one row for the blue alliance and another for the red alliance. The <em>alliance</em> column contains <em>Red</em> or <em>Blue</em>, depending on the alliance. Finally, match data frames have six teams per row and one row per match.</p></li>
<li><p>The functions <code>GetSchedule()</code>, <code>GetHybridSchedule()</code>, and <code>GetMatchResults()</code> no longer accept the <code>expand_cols</code> argument. These functions can only return a data frame in team shape. Users can convert between team, alliance, and match data frames with the functions <code>ToAllianceShape()</code>, <code>ToMatchShape()</code>, and <code>ToTeamShape()</code>.</p></li>
<li><p>I’ve added a <code>MergeReults()</code> function which merges the <em>HybridSchedule</em> and <em>Scores</em> data frames into a single data frame, providing team numbers and detailed performance data all in one table.</p></li>
<li><p>I’ve added the function <code>GetAll()</code>, which downloads everything about a single competition and saves it in a single list.</p></li>
<li><p>I’ve added functions for saving FIRST competition data locally in R data files. The functions <code>SaveData()</code> and <code>ReadData()</code> display file open and save dialogs for saving and loading data to and from <em>.RDS</em> files.</p></li>
<li><p>To give users without an authorization key some data to play with, firstapiR now includes all performance data for the 2016 FIRST Robotics Championships. The data is available in R lists named <code>archimedes2016</code>, <code>carver2016</code>, <code>curie2016</code>, etc.</p></li>
<li><p>I’ve fixed a few inconsistencies. Some character columns were changed to factors, some column names were shortened to reduce excess typing, row names are more consistent, etc.</p></li>
</ol>
</div>
<div id="getting-started---creating-a-session-object" class="section level2">
<h2>Getting Started - Creating a Session Object</h2>
<p>Every HTTP request to the FIRST API requires a username, an authorization key, a four digit year that identifies the season of interest, and a header that specifies whether the data should be returned as XML or JSON. Having to type all of these parameters into every function call would make firstapiR very cumbersome to use, especially from the R console. The firstapiR package addresses this problem with the <code>GetSession()</code> function, which returns a Session object that contains all of the parameters listed above. All other firstapiR functions require a Session object as the first parameter. Here’s an example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Create a Session object</span></a>
<a class="sourceLine" id="cb3-2" title="2">sn &lt;-<span class="st"> </span>firstapiR<span class="op">::</span><span class="kw">GetSession</span>(<span class="st">&quot;username&quot;</span>, <span class="st">&quot;key&quot;</span>)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># Display the Session object.</span></a>
<a class="sourceLine" id="cb3-5" title="5">sn</a></code></pre></div>
<pre><code>## $username
## [1] &quot;username&quot;
## 
## $key
## [1] &quot;key&quot;
## 
## $staging
## [1] FALSE
## 
## $season
## [1] 2020
## 
## $format
## [1] &quot;data.frame&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;list&quot;    &quot;Session&quot;</code></pre>
<p>As you can see the Session object is really just an R list. It’s also an instance of class “Session”, which will be useful to users who want to do some type checking.</p>
<p>In addition to the username and key, the Session object specifies the season, data format (“data.frame”, “xml”, or “json”) and whether the staging server should be used instead of the production server. Any of these parameters can be included as a named argument when calling GetSession(), or they can be modified later. For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Create a Session and specify XML format</span></a>
<a class="sourceLine" id="cb5-2" title="2">sn &lt;-<span class="st"> </span>firstapiR<span class="op">::</span><span class="kw">GetSession</span>(<span class="st">&quot;username&quot;</span>, <span class="st">&quot;key&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xml&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co"># Change the season to 2015</span></a>
<a class="sourceLine" id="cb5-5" title="5">sn<span class="op">$</span>season &lt;-<span class="st"> </span><span class="dv">2015</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co"># Display the Session object</span></a>
<a class="sourceLine" id="cb5-8" title="8">sn</a></code></pre></div>
<pre><code>## $username
## [1] &quot;username&quot;
## 
## $key
## [1] &quot;key&quot;
## 
## $staging
## [1] FALSE
## 
## $season
## [1] 2015
## 
## $format
## [1] &quot;xml&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;list&quot;    &quot;Session&quot;</code></pre>
</div>
<div id="using-the-session-object" class="section level2">
<h2>Using the Session Object</h2>
<p>The following example shows how the session object is passed to a firstapiR function:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># Create a Session and use it in a firstapiR function</span></a>
<a class="sourceLine" id="cb7-2" title="2">sn &lt;-<span class="st"> </span>firstapiR<span class="op">::</span><span class="kw">GetSession</span>(<span class="st">&quot;username&quot;</span>, <span class="st">&quot;key&quot;</span>)</a>
<a class="sourceLine" id="cb7-3" title="3">dist &lt;-<span class="st"> </span>firstapiR<span class="op">::</span><span class="kw">GetDistricts</span>(sn)</a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co"># Display the class of the object returned by GetDistricts()</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">class</span>(dist)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot; &quot;Districts&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># Display the data frame</span></a>
<a class="sourceLine" id="cb9-2" title="2">dist</a></code></pre></div>
<pre><code>##    code                  name districtCount
## 1    IN          IndianaFIRST            10
## 2   CHS      FIRST Chesapeake            10
## 3   ISR          FIRST Israel            10
## 4    NC        North Carolina            10
## 5   MAR Mid-Atlantic Robotics            10
## 6   PCH             Peachtree            10
## 7   PNW     Pacific Northwest            10
## 8    NE           New England            10
## 9   ONT               Ontario            10
## 10  FIM     FIRST In Michigan            10</code></pre>
<p>By default, GetSession creates a Session object with the current year, <code>format = &quot;data.frame&quot;</code>, and staging = <code>TRUE</code>. <code>GetDistricts()</code> returns a data frame that is also an instance of class “Districts”. <code>GetDistricts()</code> is useful because the three-letter district codes are used as arguments to several other firstapiR functions.</p>
<p><strong>Note</strong>: If you run the example above, passing the string “key” to GetSession(), firstapiR skips the HTTP request and pulls data from a local cache. See <em>Why These Examples Work: Local verses HTTP Data</em> below for an explanation of this feature.</p>
</div>
<div id="extracting-data-from-a-data-frame" class="section level2">
<h2>Extracting Data from a Data Frame</h2>
<p>R provides numerous methods for extracting, filtering, and manipulating data in data frames. Refer to the R resources listed in this vignette for additional information. Individual data elements can be extracted from a data frame using the syntax <code>data_frame$column_name[[row_number]]</code>. For example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># Retrieve the item in th 6th row of the column named &quot;code&quot;</span></a>
<a class="sourceLine" id="cb11-2" title="2">dist<span class="op">$</span>code[[<span class="dv">6</span>]]</a></code></pre></div>
<pre><code>## [1] &quot;PCH&quot;</code></pre>
<p>Here’s one of many slick techniques that are available in R:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Retrieve the name of any district with code == &quot;PNW&quot;</span></a>
<a class="sourceLine" id="cb13-2" title="2">dist<span class="op">$</span>name[dist<span class="op">$</span>code <span class="op">==</span><span class="st"> &quot;PNW&quot;</span>]</a></code></pre></div>
<pre><code>## [1] &quot;Pacific Northwest&quot;</code></pre>
</div>
<div id="next-steps" class="section level2">
<h2>Next Steps</h2>
<p>This package provides a detailed help file for every firstapiR function. Make sure the firstapiR package is loaded by running the command <code>library(firstapiR)</code>. Then in RStudio, just type the name of the function in the help view search box. Or type <code>help(function_name)</code> at the R console command prompt. Here are the firstapiR functions:</p>
<table>
<caption><strong>External Functions in firstapiR Package</strong></caption>
<tbody>
<tr class="odd">
<td align="left">GetSession()</td>
<td align="left">GetServerStatus()</td>
<td align="left">GetSeason()</td>
<td align="left">GetDistricts()</td>
</tr>
<tr class="even">
<td align="left">GetEvents()</td>
<td align="left">GetTeams()</td>
<td align="left">GetSchedule()</td>
<td align="left">GetHybridSchedule()</td>
</tr>
<tr class="odd">
<td align="left">GetMatchResults()</td>
<td align="left">GetScores()</td>
<td align="left">GetAlliances()</td>
<td align="left">GetRankings()</td>
</tr>
<tr class="even">
<td align="left">GetAwards()</td>
<td align="left">GetAwardsList()</td>
<td align="left">GetAll()</td>
<td align="left">MergeResults()</td>
</tr>
<tr class="odd">
<td align="left">ReadData()</td>
<td align="left">SaveData()</td>
<td align="left">ToTeamShape()</td>
<td align="left">ToMatchShape()</td>
</tr>
<tr class="even">
<td align="left">ToAllianceShape()</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>In addition to help documents on each function, this package contains one other vignette: <a href="http://irwinsnet.github.io/firstapiR/Functions">Overview of firstapiR Functions</a>.</p>
</div>
<div id="advanced-topics" class="section level2">
<h2>Advanced Topics</h2>
<div id="why-these-examples-work-local-verses-http-data" class="section level3">
<h3>Why These Examples Work: Local verses HTTP Data</h3>
<p>Hopefully you were able to figure out that “username” and “key” are not affiliated with a valid FIRST API account. These examples work because for all firstapiR functions, if the key value in the Session object is the literal value “key”, firstapiR skips the HTTP requests and extracts cached JSON or XML data from the R/sysdata.rda file. If you insert any other random value into the key parameter, or the username does not match an actual FIRST API username, the FIRST API will return a 401 status code and the firstapiR function will throw an error.</p>
<p>I added the local data feature for several reasons.</p>
<ul>
<li>Users can experiment with firstapiR functions and the data they provide without a FIRST API user account.</li>
<li>The examples in the help documents and vignettes will work exactly as typed.</li>
<li>Most of firstapiR’s functionality can be tested without internet access or a FIRST API account.</li>
</ul>
</div>
<div id="attributes-of-returned-firstapir-objects" class="section level3">
<h3>Attributes of Returned firstapiR Objects</h3>
<p>All of the firstapiR functions add attributes to whatever data they return. These attributes allow you to identify whether the data is local or was extracted directly from the FIRST API server, when the data was extracted from the FIRST API server, and the URL that was sent to the server. To demonstrate, we’ll analyze the Districts data frame using R’s str() function, which displays the structure of any object:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># Display the structure and attributes of the dist object</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">str</span>(dist)</a></code></pre></div>
<pre><code>## Classes &#39;Districts&#39; and &#39;data.frame&#39;:    10 obs. of  3 variables:
##  $ code         : chr  &quot;IN&quot; &quot;CHS&quot; &quot;ISR&quot; &quot;NC&quot; ...
##  $ name         : chr  &quot;IndianaFIRST&quot; &quot;FIRST Chesapeake&quot; &quot;FIRST Israel&quot; &quot;North Carolina&quot; ...
##  $ districtCount: int  10 10 10 10 10 10 10 10 10 10
##  - attr(*, &quot;url&quot;)= chr &quot;https://frc-api.firstinspires.org/v2.0/2020/districts&quot;
##  - attr(*, &quot;local_test_data&quot;)= logi TRUE
##  - attr(*, &quot;local_url&quot;)= chr &quot;https://frc-api.firstinspires.org/v2.0/2016/districts&quot;
##  - attr(*, &quot;time_downloaded&quot;)= POSIXct, format: &quot;2016-12-23 08:11:00&quot;
##  - attr(*, &quot;last_modified&quot;)= chr &quot;Fri, 07 Oct 2016 14:40:53 GMT&quot;</code></pre>
<p>The attribute <em>local_test_data</em> is set to TRUE if the object was created from cached data in the R/sysdata.rda file. The <em>local_url</em> attribute contains the actual URL that was sent to the FIRST API server to request the data, and the <em>time_downloaded</em> attribute shows when the data was downloaded from the server.</p>
<p>For non-local, HTTP data, <em>local_test_data</em> will be set to FALSE, and <em>local_url</em> will be NULL. The <em>time_downloaded</em> attribute will contain the time that the HTTP request was received, based on the local system time.</p>
<p>There is also a <em>url</em> attribute. This attribute always contains the URL that is constructed from the arguments passed to the firstapiR function. Normally, this is the actual URL that is sent to the FIRST API server, but when extracting local data, this URL is mostly ignored. In the GetDistricts() example, <em>local_url</em> matches <em>url</em> because GetDistricts has no optional parameters and there is only one way to call this function. Most other firstapiR functions have many optional parameters and a multitude of possible return values. Since it’s not practical to cache the entire FIRST API server, when requesting local data (by setting the key parameter to “key”), firstapiR ignores the optional parameters. The local data will be of the same type and format as what was requested. In these situations the <em>url</em> attribute will represent was was requested, and the <em>local_url</em> attribute will describe what was cached and returned.</p>
<p>Use the <code>attr(object, attribute_name)</code> function and syntax to retrive an attribute from an object.</p>
<p>Open the <em>tools/data.R</em> folder (only available in the firstapiR github repository) to see the firstapiR commands that were used to generate the local data.</p>
</div>
<div id="testing-firstapir-on-your-system" class="section level3">
<h3>Testing firstapiR on Your System</h3>
<p>The firstapiR package includes several automated tests in the tests/testthat folder. Users can run these tests if they have the <em>testthat</em> package installed on their system. Run all of the tests by running <code>testthat::test_dir(path_to_tests/testthat_folder)</code> at the R console.</p>
<p>If you run the <code>test_dir</code> command, you’ll probably notice that several tests are skipped. The tests are set up such that most of them can run without an internet connection or a FIRST API account. This is OK because local data requests use almost all of the firstapiR code that would be used for an actual HTTP request, including evaluation of the function arguments, constructing the URL and HTTP headers, and creating and formatting the data frame from JSON text. (If you specify the data frame format, firstapiR actually requests JSON text from the FIRST API server, because JSON is more compact than XML.) Only the actual HTTP request is skipped.</p>
<p>If you have a username and authorization key assigned by FIRST, then you can run all tests. Store your username and key in character vectors named “username” and “key”. Then run <code>test_dir</code> from the R console. The tests will detect that the variables username and key exist and will run tests that make actual HTTP calls to the FIRST API server. If either your username or key are incorrect, the tests will fail due to an HTTP 401 error.</p>
</div>
</div>
<div id="ask-questions" class="section level2">
<h2>Ask Questions</h2>
<p>Post an issue on the <a href="https://github.com/irwinsnet/firstapiR">firstapiR github repository</a> if you have questions, find bugs or have recommendations for the next version.</p>
</div>
<div id="next-vignette" class="section level2">
<h2>Next Vignette</h2>
<p><a href="http://irwinsnet.github.io/firstapiR/Functions">Overview of firstapiR Functions</a></p>
</div>
<div id="links" class="section level2">
<h2>Links</h2>
<p><a href="http://irwinsnet.github.io">Irwinsnet Home Page</a></p>
<p><a href="http://irwinsnet.github.io/firstapiR/Data">firstapiR Local Data</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
